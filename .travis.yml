language: elixir
elixir:
- 1.10.3
otp_release:
- '23.0'
service:
- postgresql
before_script:
- cp config/travis.exs config/test.exs
- MIX_ENV=test mix do ecto.setup
script:
- MIX_ENV=test mix do deps.get, ecto.migrate, test
deploy:
  provider: heroku
  api_key:
    secure: Qq8nOIJdsPJad6hkmlhQwIV7hEx6H3UCZsLn+hvIq9EvVRptUqcLYysAkZ1Fw1oX+dgmezJVZnCafo/91KFZjN6HYo4JqDDKDpEwNmjgpFhP15ehoYExDGMf4dYuL57fDmNfeurvnXHZeHl8jV7z3IWTHkCxYcWqQ6v7PDjQRxfHPsr+A3YDbiOVD7xJGLolz3EbaEzKTO9cxTH6GVRrCU4vhMQKR5PoMZv0yDbd/Hifx7JoKpij/P5ITwZk9X0n89maluqKIqTwzTF30ILJTR401Glk+VNFg1l69QGL4snYb156j78FOXzSpHJYBZ1HzLF9xuVzpf9d2jgu9TxErmczHh3EFtwe86fnvG4cth10xqAPSqDh0ZAARfGA+/4r6UcIcm0Ee8HL0Aj4Jwu30h9oxAyyE9Md/ZH0vYxnJ7hIiSPF8FKt5q/Ir/udPAYTy9lTuEp9VsAG1N0lELW+OmNEEyuCPs02FT2yiYVWMNTilsFjMgGKPKEuwpCKcUn3lLli7Ta1yFSQ6j6WrrPwdPgbiDC254XywEo2FWtchX96ZN4qtSAJFtCrPrgKxgtX9gVjrkL/8OwmEm3AvMsZPFJxhcyU6NwDLSX6UhhGp8Aqfa96IY+LJJkzz8u3ncdCCSUP9neOqnKmRowkLUUd9Qhi+EhtQe8NjHlDPCcyIWU=
  app: shielded-eyrie-94049
  on:
    repo: vtomogz/debtmanager
  skip_cleanup: 'true'
after_deploy:
- heroku run mix ecto.migrate -a shielded-eyrie-94049
